<app-dots-loader *ngIf="isLoader"></app-dots-loader><div class="container">
  <div class="row mb-4 mt-3">
      <div class="col-lg-4 col-xs-12 text-left">

          <input type="text" class="form-control searchbar" placeholder="Search..." [(ngModel)]="searchText">

      </div>
  </div>

  <div class="row">
      <div class="col-lg-12 col-xs-12">
          <div class="table-responsive">
          <table class="table table-striped">
              <thead>
                  <th>Promo Code Name</th>
                  <th>Valid From</th>
                  <th>Valid To</th>
                  <th>No Limit</th>
                  <th>Number of Uses</th>
                  <th class="text-center">Action</th>
              </thead>
              <tbody>
                  <tr *ngFor="let promoData of promoCodeData; let i=index">
                      <td class="pt-3 pb-2">{{promoData.promoCode}}</td>
                      <td class="pt-2 pb-2">{{promoData.dateFrom}}</td>
                      <td class="pt-2 pb-2">{{promoData.dateTo}}</td>
                      <td class="pt-2 pb-2">{{promoData.infinity}}</td>
                      <td class="pt-2 pb-2">{{promoData.noOfLimitedUsers}}</td>
                      <td class="text-center pt-2 pb-3"><i class="fas fa-pencil-alt mr-5" aria-hidden="true" (click)="edit(promoData.id)"></i>
                      <i class="fa fa-trash text-danger" aria-hidden="true" (click)="delete(promoData.id)"></i></td>
                  </tr>
              </tbody>
          </table>
          <pagination [totalItems]="totalItems" [(ngModel)]="currentPage" (pageChanged)="pageChanged($event)" [maxSize]="5"></pagination>
      </div>
    </div>
  </div>
</div>


<div id="editPromoCode" class="modal fade" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title text-center"></h4>
        </div>
        <div class="modal-body">
            <form #form="ngForm" novalidate>
                <div class="container">
                    
                    <div class="row mt-3">
                        <div class="form-group col-lg-6 offset-lg-3 col-md-6 col-sm-12">
                            <label class="form-control-label" for="promoCode">Promo Code Name:</label>
                            <input name="promoCode" 
                            trim="blur"
                            class="form-control" 
                            [class.is-invalid]="promoCodeError.invalid && (promoCodeError.touched || form.submitted)" 
                            required 
                            [(ngModel)]="promoCode" 
                            #promoCodeError="ngModel" />                 
                        </div>
                       
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-3 offset-lg-3 col-md-3 col-sm-12">
                            <label class="form-control-label" for="validFromDate">Validate From:</label>
                            <br>
                            <input placeholder="Date Time Range From:"
                            [(ngModel)]="dateTimeRange"
                            class="form-control"
                            name="dateFrom"
                            [selectMode]="'rangeFrom'"
                            (ngModelChange)="promoCodeDate()"
                            [owlDateTimeTrigger]="dtRange2" [owlDateTime]="dtRange2">
                     <owl-date-time #dtRange2></owl-date-time>            
                        </div>
                        <div class="form-group col-lg-3 col-md-3 col-sm-12">
                          <label class="form-control-label" for="validFromDate">Validate To:</label><br>
                          <input placeholder="Date Time Range To:"
                          [(ngModel)]="dateTimeRange"
                          class="form-control"
                          name="dateTo"
                          [selectMode]="'rangeTo'"
                          (ngModelChange)="promoCodeDate()"
                          [owlDateTimeTrigger]="dtRange3" [owlDateTime]="dtRange3">
                   <owl-date-time #dtRange3></owl-date-time>           
                      </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-6 offset-lg-3 col-md-6 col-sm-12">
                            <label class="form-control-label" for="beforeGst">Number of User's:</label> 
                            <div class="custom-radio">
                              <label clearfix>
                                  <input class="custom-radio" type="radio" 
                                  name="promocodeUses" 
                                  (ngModelChange)="model.noOfLimitedUsers = 0"
                                  [(ngModel)]="isInfinity" value="true">
                                  <span class="custom-span">No Limit</span>
                              </label>
                          </div>
                          <div class="custom-radio">
                            <label clearfix>
                                <input class="custom-radio" type="radio" 
                                name="promocodeUses"
                                [(ngModel)]="isInfinity" 
                                
                                
                                value="false" >
                                <span class="custom-span">Number of Uses</span>
                              
                            </label>
                        </div>
              
                        <div *ngIf="isInfinity == 'false'">
                          <input class="form-control" name="noOfLimitedUsers" numbersOnly trim="blur"
                          [(ngModel)]="noOfLimitedUsers">
                        </div>
                      
                           </div>         
                    </div>
              
                   
                    <div class="col-12 pt-4 pb-4">
                      <button class="btn step-next mx-auto" type="submit"  (click)="onSubmit(form)">Add</button>  
                          
                        <!-- <button class="btn step-next mx-auto" type="submit">
                            <span>Add</span>
                        </button> -->
                    </div>
                </div>
              </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
  
    </div>
  </div>